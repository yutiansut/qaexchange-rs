// @yutiansut @quantaxis - QAExchange 全局样式
// 专业量化交易系统主题样式

@import './variables.scss';

// ============= 全局重置 =============
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  font-family: $font-family;
  font-size: 14px;
  line-height: 1.5;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#app {
  height: 100%;
}

// ============= 滚动条美化 =============
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: rgba(144, 147, 153, 0.3);
  border-radius: 4px;

  &:hover {
    background: rgba(144, 147, 153, 0.5);
  }
}

// ============= Element UI 主题覆盖 =============

// 按钮
.el-button--primary {
  background-color: $primary-color;
  border-color: $primary-color;

  &:hover, &:focus {
    background-color: $primary-light;
    border-color: $primary-light;
  }
}

.el-button--success {
  background-color: $success-color;
  border-color: $success-color;
}

.el-button--danger {
  background-color: $error-color;
  border-color: $error-color;
}

// 输入框 - 柔和边框 @yutiansut @quantaxis
.el-input__inner {
  border-radius: $radius-sm;
  border-color: $light-border;
  background-color: #ffffff;
  color: $light-text-primary;
  transition: all $transition-fast;

  &::placeholder {
    color: $light-text-placeholder;
  }

  &:hover {
    border-color: darken($light-border, 10%);
  }

  &:focus {
    border-color: $primary-color;
    box-shadow: 0 0 0 2px rgba($primary-color, 0.1);
  }
}

// 文本域
.el-textarea__inner {
  border-color: $light-border;
  color: $light-text-primary;

  &::placeholder {
    color: $light-text-placeholder;
  }

  &:focus {
    border-color: $primary-color;
  }
}

// 卡片 - 柔和阴影 @yutiansut @quantaxis
.el-card {
  border-radius: $radius-md;
  border: 1px solid $light-border-light;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
  background-color: #ffffff;

  .el-card__header {
    background-color: $light-bg-secondary;
    border-bottom: 1px solid $light-border-light;
    color: $light-text-primary;
    font-weight: 500;
  }

  .el-card__body {
    color: $light-text-primary;
  }

  &:hover {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    border-color: $light-border;
  }
}

// 表格 - 柔和灰色主题 @yutiansut @quantaxis
.el-table {
  font-size: 13px;
  color: $light-text-primary;
  background-color: transparent;

  // 表头 - 柔和灰色背景
  th.el-table__cell {
    background-color: $light-bg-table-header !important;
    font-weight: 600;
    color: $light-text-secondary !important;
    border-bottom: 1px solid $light-border !important;
  }

  // 单元格
  td.el-table__cell {
    color: $light-text-primary;
    border-bottom: 1px solid $light-border-light !important;
  }

  // 斑马纹 - 使用柔和灰色
  .el-table__row--striped td.el-table__cell {
    background-color: $light-bg-table-stripe !important;
  }

  // hover 行 - 柔和蓝灰色
  .el-table__row:hover > td.el-table__cell {
    background-color: #f0f7ff !important;
  }

  // 当前选中行
  .current-row > td.el-table__cell {
    background-color: #e6f4ff !important;
  }

  // 表格边框
  &.el-table--border {
    border: 1px solid $light-border;
    border-radius: 4px;
    overflow: hidden;

    &::after, &::before {
      background-color: $light-border;
    }

    .el-table__cell {
      border-right: 1px solid $light-border-light;
    }
  }

  // 空数据提示
  .el-table__empty-text {
    color: $light-text-muted;
  }
}

// 消息提示
.el-message {
  border-radius: $radius-md;
  box-shadow: $shadow-lg;
}

// 对话框
.el-dialog {
  border-radius: $radius-lg;

  .el-dialog__header {
    border-bottom: 1px solid $light-border;
    padding: $spacing-md $spacing-lg;
  }

  .el-dialog__body {
    padding: $spacing-lg;
  }
}

// 标签页
.el-tabs__item {
  font-size: 14px;

  &.is-active {
    color: $primary-color;
    font-weight: 600;
  }
}

.el-tabs__active-bar {
  background-color: $primary-color;
}

// ============= Element UI 额外修复 @yutiansut @quantaxis =============

// 下拉菜单 hover 修复
.el-dropdown-menu__item {
  color: $light-text-primary !important;

  &:hover, &:focus {
    background-color: rgba($primary-color, 0.08) !important;
    color: $primary-color !important;
  }
}

// Select 下拉选项 hover 修复
.el-select-dropdown__item {
  color: $light-text-primary !important;

  &.hover, &:hover {
    background-color: rgba($primary-color, 0.08) !important;
    color: $light-text-primary !important;
  }

  &.selected {
    color: $primary-color !important;
    font-weight: 600;
  }
}

// Autocomplete 下拉选项
.el-autocomplete-suggestion li {
  color: $light-text-primary !important;

  &:hover, &.highlighted {
    background-color: rgba($primary-color, 0.08) !important;
  }
}

// 表格排序图标
.el-table .sort-caret {
  border-color: transparent !important;

  &.ascending {
    border-bottom-color: $light-text-secondary !important;
  }

  &.descending {
    border-top-color: $light-text-secondary !important;
  }
}

.el-table .ascending .sort-caret.ascending,
.el-table .descending .sort-caret.descending {
  border-bottom-color: $primary-color !important;
  border-top-color: $primary-color !important;
}

// Tag 标签对比度
.el-tag--info {
  background-color: rgba(144, 147, 153, 0.1);
  border-color: rgba(144, 147, 153, 0.2);
  color: $light-text-secondary;
}

// 输入框 placeholder
.el-input__inner::placeholder,
.el-textarea__inner::placeholder {
  color: $light-text-muted;
}

// Descriptions 描述列表
.el-descriptions-item__label {
  color: $light-text-secondary !important;
}

.el-descriptions-item__content {
  color: $light-text-primary !important;
}

// 分页器
.el-pagination {
  .el-pager li {
    color: $light-text-primary;

    &:hover {
      color: $primary-color;
    }

    &.active {
      color: $primary-color;
    }
  }

  button {
    color: $light-text-primary;

    &:disabled {
      color: $light-text-muted;
    }
  }
}

// ============= 交易相关样式 =============
.price-up, .buy-color {
  color: $buy-color !important;
}

.price-down, .sell-color {
  color: $sell-color !important;
}

.price-up-bg {
  background-color: $buy-bg !important;
}

.price-down-bg {
  background-color: $sell-bg !important;
}

// ============= 数字字体 =============
.mono {
  font-family: $font-mono;
}

// ============= 常用工具类 =============
.text-center { text-align: center; }
.text-right { text-align: right; }
.text-left { text-align: left; }

.text-primary { color: $primary-color; }
.text-success { color: $success-color; }
.text-warning { color: $warning-color; }
.text-danger { color: $error-color; }
.text-muted { color: $light-text-muted; }

.font-bold { font-weight: 600; }
.font-medium { font-weight: 500; }

.mt-xs { margin-top: $spacing-xs; }
.mt-sm { margin-top: $spacing-sm; }
.mt-md { margin-top: $spacing-md; }
.mt-lg { margin-top: $spacing-lg; }

.mb-xs { margin-bottom: $spacing-xs; }
.mb-sm { margin-bottom: $spacing-sm; }
.mb-md { margin-bottom: $spacing-md; }
.mb-lg { margin-bottom: $spacing-lg; }

.ml-sm { margin-left: $spacing-sm; }
.mr-sm { margin-right: $spacing-sm; }

.p-sm { padding: $spacing-sm; }
.p-md { padding: $spacing-md; }
.p-lg { padding: $spacing-lg; }

// ============= Flex 布局 =============
.flex { display: flex; }
.flex-1 { flex: 1; }
.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}
.flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.flex-col { flex-direction: column; }
.items-center { align-items: center; }
.gap-sm { gap: $spacing-sm; }
.gap-md { gap: $spacing-md; }

// ============= 深色主题类 =============
.dark-theme {
  background-color: $dark-bg-primary;
  color: $dark-text-primary;

  .el-card {
    background-color: $dark-bg-card;
    border: 1px solid $dark-border;

    .el-card__header {
      border-bottom-color: $dark-border;
    }
  }

  .el-table {
    background-color: transparent;
    color: $dark-text-primary;

    th {
      background-color: $dark-bg-secondary !important;
      color: $dark-text-secondary;
    }

    tr {
      background-color: transparent;
    }

    .el-table__row:hover > td {
      background-color: $dark-bg-tertiary !important;
    }

    td, th.is-leaf {
      border-bottom-color: $dark-border;
    }

    &::before {
      background-color: $dark-border;
    }
  }

  .el-input__inner {
    background-color: $dark-bg-tertiary;
    border-color: $dark-border;
    color: $dark-text-primary;

    &::placeholder {
      color: $dark-text-muted;
    }
  }

  .el-select-dropdown {
    background-color: $dark-bg-secondary;
    border-color: $dark-border;

    .el-select-dropdown__item {
      color: $dark-text-primary;

      &:hover {
        background-color: $dark-bg-tertiary;
      }
    }
  }

  .el-tabs__item {
    color: $dark-text-secondary;

    &.is-active {
      color: $primary-color;
    }
  }

  .el-tabs__nav-wrap::after {
    background-color: $dark-border;
  }
}

// ============= VXE-Table 样式修复 @yutiansut @quantaxis =============
.vxe-table {
  // 基础样式
  font-size: 13px;
  color: $light-text-primary;

  // 表头
  .vxe-header--column {
    background-color: $light-bg-primary !important;
    color: $light-text-primary !important;
    font-weight: 600;
  }

  // 单元格
  .vxe-body--column {
    color: $light-text-primary !important;
  }

  // hover 行 - 修复白底白字问题
  .vxe-body--row.row--hover {
    background-color: rgba($primary-color, 0.08) !important;

    .vxe-body--column {
      color: $light-text-primary !important;
    }

    .vxe-cell {
      color: $light-text-primary !important;
    }
  }

  // 选中行
  .vxe-body--row.row--current {
    background-color: rgba($primary-color, 0.12) !important;
  }

  // 斑马纹
  .vxe-body--row.row--stripe {
    background-color: rgba(0, 0, 0, 0.02);
  }

  // 边框
  .vxe-table--border-line {
    border-color: $light-border;
  }

  // 修复 tooltip 溢出显示
  .vxe-cell--tooltip {
    color: $light-text-primary;
  }
}

// VXE-Table 分页器
.vxe-pager {
  color: $light-text-primary;

  .vxe-pager--btn-wrapper {
    .vxe-pager--num-btn {
      color: $light-text-primary;

      &:hover {
        background-color: rgba($primary-color, 0.1);
        color: $primary-color;
      }

      &.is--active {
        background-color: $primary-color;
        color: white;
      }
    }
  }
}

// ============= 页面过渡动画 =============
.fade-enter-active,
.fade-leave-active {
  transition: opacity $transition-normal;
}

.fade-enter,
.fade-leave-to {
  opacity: 0;
}

.slide-fade-enter-active {
  transition: all $transition-normal ease;
}

.slide-fade-leave-active {
  transition: all $transition-fast ease;
}

.slide-fade-enter,
.slide-fade-leave-to {
  transform: translateX(-10px);
  opacity: 0;
}
