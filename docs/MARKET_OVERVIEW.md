# 市场总览页面使用指南

## 🌐 访问地址

**Web界面**: http://localhost:8096/#/market-overview

**命令行工具**:
```bash
bash /home/quantaxis/qaexchange-rs/scripts/market_status.sh
```

---

## 📊 页面功能

### 1. 统计卡片（顶部）

实时显示市场关键指标：
- **总账户数**: 当前系统中的交易账户总数
- **活跃订单**: 待成交和部分成交的订单数量
- **总资金**: 所有账户余额总和
- **高风险账户**: 风险率 > 80% 的账户数量（红色警告）

### 2. 账户列表标签页

**功能**:
- 显示所有交易账户的详细信息
- 支持按风险率、余额排序
- 搜索账户ID或名称
- 分页浏览（每页20条）

**字段说明**:
| 字段 | 说明 | 示例 |
|------|------|------|
| 账户ID | 唯一标识符 | ACC_xxx... |
| 账户名称 | 账户名称 | Scalper_1 Account |
| 余额 | 当前账户总资金 | ¥500,000,000.00 |
| 可用资金 | 可用于开仓的资金 | ¥300,000,000.00 |
| 占用保证金 | 被持仓占用的保证金 | ¥200,000,000.00 |
| 风险率 | 保证金占用比例 | 40.0% |

**颜色标识**:
- 🟢 绿色: 风险率 < 50% （安全）
- 🟡 黄色: 风险率 50-70% （警告）
- 🔴 红色: 风险率 > 70% （危险）

**操作**:
- **详情**: 跳转到账户详情页面
- **订单**: 快速过滤该账户的订单

### 3. 活跃订单标签页

**功能**:
- 显示所有账户的订单
- 按状态筛选（全部/待成交/部分成交/已成交/已撤销）
- 搜索订单ID、合约代码
- 实时更新（每10秒）

**字段说明**:
| 字段 | 说明 |
|------|------|
| 订单ID | 唯一订单标识 |
| 账户ID | 所属账户（显示账户名称） |
| 合约 | 交易合约代码 |
| 方向 | 买/卖 |
| 开平 | 开仓/平仓 |
| 价格 | 限价单价格 |
| 数量 | 订单数量 |
| 成交 | 已成交数量 |
| 状态 | 订单当前状态 |
| 提交时间 | 订单提交时间 |

### 4. 实时监控标签页

**订单流监控**:
- 显示最新20条订单
- 实时滚动更新
- 颜色区分买卖方向

**风险监控**:
- 显示Top 10高风险账户
- 风险率 > 70% 的账户列表
- 实时更新保证金占用情况

---

## 🔄 自动刷新

页面每10秒自动刷新数据，包括：
- 账户列表
- 订单状态
- 实时监控数据

可以点击"刷新"按钮手动触发更新。

---

## 🔍 搜索和筛选

### 账户搜索
支持搜索：
- 账户ID (ACC_xxx...)
- 账户名称 (Scalper_1)

### 订单筛选
支持筛选：
- 订单状态（下拉选择）
- 订单ID（文本搜索）
- 合约代码（文本搜索）
- 账户ID（文本搜索）

---

## 📈 当前市场数据

根据最新统计（2025-11-25）：

```
总账户数: 21
总资金: ¥8,004,323,436.56
活跃订单: 9,788
高风险账户: 1

交易Agent:
- 做市商: 4个
- 短期交易者: 16个
- 总计: 20个agent运行中

订单簿 (IF2501):
- 买10档 / 卖10档
- 价差: 0.2 (极窄)
- 最新价: 3799.8
```

---

## 💡 使用场景

### 1. 日常监控
- 每日查看账户健康状况
- 监控风险率变化
- 检查订单流状况

### 2. 风险预警
- 快速识别高风险账户
- 及时处理异常情况
- 监控保证金充足性

### 3. 市场分析
- 观察订单流分布
- 分析交易活跃度
- 监控流动性状况

### 4. 问题排查
- 查找特定账户订单
- 检查订单状态
- 验证交易执行情况

---

## 🔒 权限要求

此页面需要**管理员权限** (`requireAdmin: true`)

普通用户无法访问此页面，会被自动重定向。

---

## 🛠️ 故障排查

### 页面无法加载
1. 检查后端服务是否运行:
   ```bash
   curl http://localhost:8094/health
   ```

2. 检查前端服务是否运行:
   ```bash
   curl http://localhost:8096
   ```

### 数据不显示
1. 检查API响应:
   ```bash
   curl http://localhost:8094/api/management/accounts | python3 -m json.tool
   ```

2. 查看浏览器控制台错误

### 自动刷新不工作
1. 检查浏览器控制台是否有错误
2. 尝试手动点击"刷新"按钮
3. 刷新整个页面

---

## 📊 命令行快速查看

使用命令行工具快速查看市场状态：

```bash
# 查看完整市场状态
bash /home/quantaxis/qaexchange-rs/scripts/market_status.sh

# 只查看订单簿
curl -s http://localhost:8094/api/market/orderbook/IF2501 | python3 -m json.tool

# 只查看账户统计
curl -s http://localhost:8094/api/management/accounts | python3 -m json.tool | head -50
```

---

## 🔗 相关页面

- [系统监控](/monitoring) - 系统性能和存储监控
- [订单管理](/orders) - 个人订单管理
- [账户管理](/accounts) - 个人账户管理
- [风控监控](/admin-risk) - 风险控制和强平管理

---

**作者**: @yutiansut @quantaxis
**版本**: 1.0
**更新日期**: 2025-11-25
