# å‰åç«¯æ•°æ®å¯¹æ¥å®ç°æ¸…å•

## ğŸ“Š æ•´ä½“è¿›åº¦
- âœ… å·²å®Œæˆ: 4/15
- ğŸš§ è¿›è¡Œä¸­: 0/15
- âŒ å¾…å®ç°: 11/15

---

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âœ… **åç«¯**: `/api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- âœ… **åç«¯**: `/api/auth/login` - ç”¨æˆ·ç™»å½•
- âœ… **åç«¯**: `/api/auth/user/{user_id}` - è·å–ç”¨æˆ·ä¿¡æ¯
- âœ… **å‰ç«¯**: `views/login.vue` - ç™»å½•é¡µé¢å·²å¯¹æ¥
- âœ… **å‰ç«¯**: `views/register.vue` - æ³¨å†Œé¡µé¢å·²å¯¹æ¥

### 2. ç³»ç»Ÿç›‘æ§
- âœ… **åç«¯**: `/api/monitoring/system` - ç³»ç»Ÿç›‘æ§æ•°æ®
- âœ… **å‰ç«¯**: `views/dashboard/index.vue` - ç›‘æ§é¢æ¿å·²å¯¹æ¥
- âœ… **å‰ç«¯**: `views/monitoring/index.vue` - è¯¦ç»†ç›‘æ§å·²å¯¹æ¥

### 3. ç®¡ç†ç«¯åŠŸèƒ½ï¼ˆå·²å¯¹æ¥APIï¼‰
- âœ… **åç«¯**: åˆçº¦ç®¡ç†APIå®Œæ•´
- âœ… **åç«¯**: ç»“ç®—ç®¡ç†APIå®Œæ•´
- âœ… **åç«¯**: é£æ§ç›‘æ§APIå®Œæ•´
- âœ… **åç«¯**: è´¦æˆ·ç®¡ç†APIå®Œæ•´
- âœ… **å‰ç«¯**: `views/admin/*` - ç®¡ç†é¡µé¢å·²å¯¹æ¥

---

## âŒ å¾…å®ç°åŠŸèƒ½

### 4. ç”¨æˆ·è´¦æˆ·ç®¡ç† - accounts/index.vue
**çŠ¶æ€**: âŒ éƒ¨åˆ†å¯¹æ¥ï¼Œç¼ºå°‘å¼€æˆ·/å…¥é‡‘/å‡ºé‡‘åŠŸèƒ½

#### åç«¯APIæ£€æŸ¥:
- âœ… `POST /api/account/open` - å¼€æˆ· (å·²å®ç°)
- âœ… `GET /api/account/{user_id}` - æŸ¥è¯¢è´¦æˆ· (å·²å®ç°)
- âœ… `POST /api/account/deposit` - å…¥é‡‘ (å·²å®ç°)
- âœ… `POST /api/account/withdraw` - å‡ºé‡‘ (å·²å®ç°)

#### å‰ç«¯é—®é¢˜:
- âŒ é¡µé¢è°ƒç”¨ `queryAccount(userId)` ä½†å½“å‰ç”¨æˆ·æœªä¼ é€’
- âŒ å¼€æˆ·å¯¹è¯æ¡†åŠŸèƒ½ä¸å®Œæ•´
- âŒ å…¥é‡‘/å‡ºé‡‘å¯¹è¯æ¡†ç¼ºå¤±
- âŒ éœ€è¦é›†æˆVuex currentUserçŠ¶æ€

#### éœ€è¦å®ç°:
1. ä¿®æ”¹ `handleQuery()` ä½¿ç”¨å½“å‰ç™»å½•ç”¨æˆ·ID
2. å®Œå–„å¼€æˆ·å¯¹è¯æ¡†ï¼Œè°ƒç”¨ `openAccount` API
3. æ·»åŠ å…¥é‡‘/å‡ºé‡‘å¯¹è¯æ¡†
4. å®æ—¶åˆ·æ–°è´¦æˆ·æ•°æ®

---

### 5. è®¢å•ç®¡ç† - orders/index.vue
**çŠ¶æ€**: âŒ æœªå¯¹æ¥ï¼Œæ˜¾ç¤ºå‡æ•°æ®

#### åç«¯APIæ£€æŸ¥:
- âœ… `POST /api/order/submit` - æäº¤è®¢å• (å·²å®ç°)
- âœ… `POST /api/order/cancel` - æ’¤å• (å·²å®ç°)
- âœ… `GET /api/order/{order_id}` - æŸ¥è¯¢è®¢å• (å·²å®ç°)
- âœ… `GET /api/order/user/{user_id}` - æŸ¥è¯¢ç”¨æˆ·è®¢å• (å·²å®ç°)

#### å‰ç«¯é—®é¢˜:
- âŒ å®Œå…¨ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
- âŒ æœªè°ƒç”¨ä»»ä½•åç«¯API
- âŒ æ’¤å•åŠŸèƒ½æœªå®ç°

#### éœ€è¦å®ç°:
1. è°ƒç”¨ `queryUserOrders(currentUser)` è·å–è®¢å•åˆ—è¡¨
2. å®ç°æ’¤å•åŠŸèƒ½ï¼Œè°ƒç”¨ `cancelOrder` API
3. æ·»åŠ è®¢å•çŠ¶æ€ç­›é€‰
4. æ·»åŠ è‡ªåŠ¨åˆ·æ–°æœºåˆ¶

---

### 6. æŒä»“ç®¡ç† - positions/index.vue
**çŠ¶æ€**: âŒ æœªå¯¹æ¥ï¼Œæ˜¾ç¤ºå‡æ•°æ®

#### åç«¯APIæ£€æŸ¥:
- âœ… `GET /api/position/{user_id}` - æŸ¥è¯¢æŒä»“ (å·²å®ç°)

#### å‰ç«¯é—®é¢˜:
- âŒ å®Œå…¨ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
- âŒ æœªè°ƒç”¨ä»»ä½•åç«¯API

#### éœ€è¦å®ç°:
1. è°ƒç”¨ `queryPosition(currentUser)` è·å–æŒä»“æ•°æ®
2. å®æ—¶æ˜¾ç¤ºæŒä»“ç›ˆäº
3. æ·»åŠ å¹³ä»“åŠŸèƒ½ï¼ˆéœ€è¦åç«¯å®ç°å¹³ä»“APIï¼‰
4. æ·»åŠ æŒä»“æ±‡æ€»ç»Ÿè®¡

---

### 7. æˆäº¤è®°å½• - trades/index.vue
**çŠ¶æ€**: âŒ æœªå¯¹æ¥ï¼Œæ˜¾ç¤ºå‡æ•°æ®

#### åç«¯APIæ£€æŸ¥:
- âŒ ç¼ºå°‘ `GET /api/trades/user/{user_id}` API

#### å‰ç«¯é—®é¢˜:
- âŒ å®Œå…¨ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
- âŒ åç«¯ç¼ºå°‘æˆäº¤è®°å½•æŸ¥è¯¢API

#### éœ€è¦å®ç°:
**åç«¯**:
1. å®ç° `GET /api/trades/user/{user_id}` æŸ¥è¯¢ç”¨æˆ·æˆäº¤è®°å½•
2. æ”¯æŒåˆ†é¡µã€ç­›é€‰ï¼ˆæ—¶é—´èŒƒå›´ã€åˆçº¦ï¼‰

**å‰ç«¯**:
1. è°ƒç”¨æˆäº¤è®°å½•API
2. æ·»åŠ æ—¶é—´ç­›é€‰å™¨
3. æ·»åŠ åˆçº¦ç­›é€‰å™¨
4. è®¡ç®—æˆäº¤æ±‡æ€»ç»Ÿè®¡

---

### 8. äº¤æ˜“é¢æ¿ - trade/index.vue
**çŠ¶æ€**: âŒ éƒ¨åˆ†å¯¹æ¥ï¼Œç¼ºå°‘å…³é”®åŠŸèƒ½

#### åç«¯APIæ£€æŸ¥:
- âœ… `POST /api/order/submit` - æäº¤è®¢å• (å·²å®ç°)
- âœ… `GET /api/market/instruments` - è·å–åˆçº¦åˆ—è¡¨ (å·²å®ç°)
- âœ… `GET /api/market/orderbook/{instrument_id}` - è·å–è®¢å•ç°¿ (å·²å®ç°)
- âŒ WebSocketå®æ—¶è¡Œæƒ… (éœ€è¦è¿æ¥)

#### å‰ç«¯é—®é¢˜:
- âŒ ä¸‹å•åŠŸèƒ½æœªå®Œæ•´å®ç°
- âŒ æœªæ˜¾ç¤ºå®æ—¶è®¢å•ç°¿
- âŒ æœªæ˜¾ç¤ºå®æ—¶æˆäº¤
- âŒ WebSocketæœªè¿æ¥

#### éœ€è¦å®ç°:
**åç«¯**:
1. ç¡®ä¿WebSocketæœåŠ¡æ­£å¸¸è¿è¡Œ

**å‰ç«¯**:
1. å®ç°ä¸‹å•è¡¨å•ï¼Œè°ƒç”¨ `submitOrder` API
2. è¿æ¥WebSocketè·å–å®æ—¶è¡Œæƒ…
3. æ˜¾ç¤ºè®¢å•ç°¿æ·±åº¦æ•°æ®
4. æ˜¾ç¤ºæœ€è¿‘æˆäº¤è®°å½•
5. æ·»åŠ å¿«é€Ÿä¸‹å•åŠŸèƒ½

---

### 9. Kçº¿å›¾è¡¨ - chart/index.vue
**çŠ¶æ€**: âŒ æœªå®ç°ï¼Œæ˜¾ç¤ºå ä½ç¬¦

#### åç«¯APIæ£€æŸ¥:
- âŒ ç¼ºå°‘ Kçº¿æ•°æ®API
- âŒ ç¼ºå°‘å†å²è¡Œæƒ…æ•°æ®API

#### éœ€è¦å®ç°:
**åç«¯**:
1. å®ç° `GET /api/market/kline/{instrument_id}` Kçº¿æ•°æ®API
2. æ”¯æŒå¤šç§å‘¨æœŸï¼ˆ1åˆ†é’Ÿã€5åˆ†é’Ÿã€15åˆ†é’Ÿã€1å°æ—¶ã€æ—¥çº¿ï¼‰
3. æ”¯æŒå†å²æ•°æ®æŸ¥è¯¢

**å‰ç«¯**:
1. é›†æˆ ECharts æˆ– TradingView
2. è°ƒç”¨Kçº¿æ•°æ®API
3. å®æ—¶æ›´æ–°æœ€æ–°Kçº¿
4. æ”¯æŒå‘¨æœŸåˆ‡æ¢
5. æ·»åŠ æŠ€æœ¯æŒ‡æ ‡ï¼ˆå‡çº¿ã€MACDã€KDJç­‰ï¼‰

---

### 10. èµ„é‡‘æ›²çº¿ - user/account-curve.vue
**çŠ¶æ€**: âŒ æœªå¯¹æ¥ï¼Œæ˜¾ç¤ºå‡æ•°æ®

#### åç«¯APIæ£€æŸ¥:
- âŒ ç¼ºå°‘è´¦æˆ·å†å²æ›²çº¿æ•°æ®API

#### éœ€è¦å®ç°:
**åç«¯**:
1. å®ç° `GET /api/account/{user_id}/curve` è´¦æˆ·æƒç›Šæ›²çº¿API
2. è¿”å›æ¯æ—¥æƒç›Šã€å¯ç”¨èµ„é‡‘ã€ä¿è¯é‡‘å†å²æ•°æ®
3. æ”¯æŒæ—¶é—´èŒƒå›´ç­›é€‰

**å‰ç«¯**:
1. è°ƒç”¨æ›²çº¿æ•°æ®API
2. ä½¿ç”¨ ECharts ç»˜åˆ¶æ›²çº¿å›¾
3. æ˜¾ç¤ºæ”¶ç›Šç‡ç»Ÿè®¡
4. æ·»åŠ æ—¶é—´èŒƒå›´é€‰æ‹©å™¨

---

## ğŸ”§ éœ€è¦æ–°å¢çš„åç«¯API

### 1. æˆäº¤è®°å½•æŸ¥è¯¢
```
GET /api/trades/user/{user_id}
å‚æ•°: page, size, start_date, end_date, instrument_id
è¿”å›: æˆäº¤åˆ—è¡¨ã€æ€»æ•°ã€æ±‡æ€»ç»Ÿè®¡
```

### 2. Kçº¿æ•°æ®æŸ¥è¯¢
```
GET /api/market/kline/{instrument_id}
å‚æ•°: period (1m/5m/15m/1h/1d), start_time, end_time, limit
è¿”å›: OHLCVæ•°æ®æ•°ç»„
```

### 3. è´¦æˆ·æƒç›Šæ›²çº¿
```
GET /api/account/{user_id}/curve
å‚æ•°: start_date, end_date
è¿”å›: æ¯æ—¥æƒç›Šã€å¯ç”¨èµ„é‡‘ã€ä¿è¯é‡‘æ•°æ®
```

### 4. å¹³ä»“åŠŸèƒ½
```
POST /api/order/close
å‚æ•°: user_id, instrument_id, direction, volume
è¿”å›: å¹³ä»“ç»“æœ
```

---

## ğŸ“‹ å®ç°ä¼˜å…ˆçº§

### P0 - æ ¸å¿ƒäº¤æ˜“åŠŸèƒ½ï¼ˆç«‹å³å®ç°ï¼‰
1. âœ… ç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼ˆå·²å®Œæˆï¼‰
2. **è®¢å•ç®¡ç†** - æŸ¥è¯¢ã€æ’¤å•
3. **æŒä»“ç®¡ç†** - æŸ¥è¯¢ã€å¹³ä»“
4. **äº¤æ˜“é¢æ¿** - ä¸‹å•åŠŸèƒ½

### P1 - é‡è¦åŠŸèƒ½ï¼ˆæœ¬å‘¨å®Œæˆï¼‰
5. **æˆäº¤è®°å½•** - å†å²æŸ¥è¯¢
6. **è´¦æˆ·ç®¡ç†** - å¼€æˆ·ã€å…¥é‡‘ã€å‡ºé‡‘
7. **WebSocketå®æ—¶è¡Œæƒ…** - è®¢å•ç°¿ã€æˆäº¤

### P2 - å¢å¼ºåŠŸèƒ½ï¼ˆä¸‹å‘¨å®Œæˆï¼‰
8. **Kçº¿å›¾è¡¨** - å†å²Kçº¿ã€å®æ—¶æ›´æ–°
9. **èµ„é‡‘æ›²çº¿** - æƒç›Šæ›²çº¿ã€æ”¶ç›Šç»Ÿè®¡
10. **é£æ§ç›‘æ§** - å®æ—¶é£é™©æŒ‡æ ‡

---

## ğŸš€ å¿«é€Ÿå¼€å§‹å®ç°æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šä¿®å¤è´¦æˆ·é¡µé¢ï¼ˆç«‹å³æ‰§è¡Œï¼‰
```javascript
// 1. ä¿®æ”¹ accounts/index.vue
methods: {
  async fetchAccount() {
    const userId = this.$store.getters.currentUser
    const data = await queryAccount(userId)
    this.accountList = [data] // æ˜¾ç¤ºå½“å‰ç”¨æˆ·è´¦æˆ·
  }
}
```

### ç¬¬äºŒæ­¥ï¼šå®ç°è®¢å•ç®¡ç†ï¼ˆä¼˜å…ˆï¼‰
```javascript
// 2. ä¿®æ”¹ orders/index.vue
async fetchOrders() {
  const userId = this.$store.getters.currentUser
  const data = await queryUserOrders(userId)
  this.orderList = data
}

async handleCancel(orderId) {
  await cancelOrder({ order_id: orderId })
  this.$message.success('æ’¤å•æˆåŠŸ')
  this.fetchOrders()
}
```

### ç¬¬ä¸‰æ­¥ï¼šå®ç°æŒä»“ç®¡ç†
```javascript
// 3. ä¿®æ”¹ positions/index.vue
async fetchPositions() {
  const userId = this.$store.getters.currentUser
  const data = await queryPosition(userId)
  this.positionList = data.positions || []
}
```

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´**: 2025-10-04
**çŠ¶æ€**: å¾…é€ä¸€å®ç°
